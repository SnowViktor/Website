---
import {
    type CollectionEntry,
    type CollectionKey,
    getCollection,
} from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import Display from "../../components/Display.astro";

const collections: CollectionKey[] = [
    "ContactAndCommunicationBookDiaries",
    "Prose",
];
let sortedCollection: CollectionEntry<CollectionKey>[] = [];
for (const collection of collections) {
    const currentCollection = await getCollection(collection);
    sortedCollection = sortedCollection.concat(currentCollection);
}
sortedCollection = sortedCollection.sort(
    (a, b) =>
        new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime(),
);
---
{/* 使用 layouts */}
<BaseLayout title="文章" description="【文章列表】">
    <h1>文章</h1>
    <p id="annotation">註：「〇」表示無題。</p>
    <ul>
        {
            sortedCollection.map((article) => (
                <li>
                    <Display article={article} />
                </li>
            ))
        }
    </ul>
</BaseLayout>

<style>
    #annotation {
        color: var(--color-neutral-1);
        font-size: 0.8em;
        font-weight: 500;
        text-align: center;
    }

    ul {
        list-style-type: none;
        padding-inline-start: 0;
    }
</style>
